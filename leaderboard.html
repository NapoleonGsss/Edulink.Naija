<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Leaderboard | EduLinkNaija</title>
  <link rel="stylesheet" href="./CSS/style.css">
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <style>
    body {
      background: url('https://images.unsplash.com/photo-1503676260728-1c00da094a0b?auto=format&fit=crop&w=1920&q=80') center/cover no-repeat;
      background-attachment: fixed;
      color: #fff;
      font-family: 'Poppins', sans-serif;
    }

    .leaderboard-container {
      background: rgba(0,0,0,0.6);
      backdrop-filter: blur(8px);
      margin: 100px auto 50px;
      padding: 2rem;
      max-width: 900px;
      border-radius: 15px;
      box-shadow: 0 0 25px rgba(0,255,255,0.15);
    }

    h1 {
      text-align: center;
      font-size: 2rem;
      color: #00ffff;
      margin-bottom: 1rem;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      padding: 12px;
      text-align: left;
    }

    th {
      color: #ff00ff;
      font-weight: 600;
      border-bottom: 2px solid rgba(255,255,255,0.2);
    }

    tr {
      transition: transform 0.4s ease, background 0.3s ease;
    }

    tr:hover {
      background: rgba(255,255,255,0.05);
      transform: translateY(-3px);
    }

    .rank {
      color: #00ffff;
      font-weight: 700;
    }

    .grade {
      padding: 4px 8px;
      border-radius: 6px;
      font-size: 0.8rem;
      margin-left: 6px;
    }

    .A { background:#00ffff; color:#000; }
    .B { background:#4db8ff; color:#000; }
    .C { background:#ffd633; color:#000; }
    .D { background:#ff8533; color:#000; }
    .E { background:#ff4d4d; color:#fff; }
    .F { background:#990000; color:#fff; }

    .controls {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-bottom: 15px;
    }

    .controls button {
      background: linear-gradient(90deg, #00ffff, #ff00ff);
      border: none;
      color: #000;
      font-weight: 600;
      padding: 8px 15px;
      border-radius: 25px;
      cursor: pointer;
      transition: 0.3s;
    }

    .controls button:hover {
      transform: scale(1.05);
      filter: brightness(1.2);
    }

    @media(max-width:768px){
      table, thead, tbody, th, td, tr { display: block; }
      th { display:none; }
      tr { margin-bottom: 15px; }
      td { padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.1); }
      td::before {
        content: attr(data-label);
        font-weight: 600;
        color: #00ffff;
        display: block;
        margin-bottom: 4px;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">EduLink<span>Naija</span></div>
    <div class="menu-toggle" id="menuToggle"><i class="fas fa-bars"></i></div>
    <nav>
      <ul class="nav-links" id="navLinks">
        <li><a href="./index.html">Home</a></li>
        <li><a href="./about.html">About Us</a></li>
        <li><a href="./freebooks.html">FreeBooks/PDF</a></li>
        <li><a href="./quiz.html">Quiz & Past Questions</a></li>
        <li><a href="./leaderboard.html" class="active">Leaderboard</a></li>
      </ul>
    </nav>
  </header>

  <section class="leaderboard-container">
    <div class="controls">
      <button id="refreshBtn">Refresh</button>
      <button id="clearBtn">Clear</button>
    </div>
    <h1>Leaderboard</h1>
    <table>
      <thead>
        <tr><th>Rank</th><th>Name</th><th>Subject</th><th>Score</th><th>Date</th></tr>
      </thead>
      <tbody id="leaderboardBody"></tbody>
    </table>
  </section>

  <footer>
    <p style="text-align:center;color:#aaa;">&copy; 2025 EduLinkNaija | Built by Oluyede Samuel & Adewuyi Taiwo</p>
  </footer>

  <script>
  const navLinks=document.getElementById('navLinks');
  document.getElementById('menuToggle').addEventListener('click',()=>navLinks.classList.toggle('active'));

  const body=document.getElementById("leaderboardBody");
  const refreshBtn=document.getElementById("refreshBtn");
  const clearBtn=document.getElementById("clearBtn");

  function loadLeaderboard(){
    const data=JSON.parse(localStorage.getItem("edulink_leaderboard")||"[]");
    body.innerHTML="";
    if(data.length===0){
      body.innerHTML='<tr><td colspan="5" style="text-align:center;color:#ccc;">No quiz records yet â€” go take one!</td></tr>';
      return;
    }
    data.sort((a,b)=>b.score-a.score);
    data.forEach((e,i)=>{
      const grade=getGrade(e.score);
      const tr=document.createElement("tr");
      tr.innerHTML=`
        <td class="rank" data-label="Rank">#${i+1}</td>
        <td data-label="Name">${e.name}</td>
        <td data-label="Subject">${e.subject}</td>
        <td data-label="Score">${e.score}% <span class="grade ${grade}">${grade}</span></td>
        <td data-label="Date">${new Date(e.date).toLocaleString()}</td>
      `;
      tr.style.opacity="0";
      body.appendChild(tr);
      setTimeout(()=>tr.style.opacity="1",i*100);
    });
  }

  function getGrade(p){
    if(p>=90)return"A";
    if(p>=80)return"B";
    if(p>=70)return"C";
    if(p>=60)return"D";
    if(p>=50)return"E";
    return"F";
  }

  refreshBtn.onclick=loadLeaderboard;
  clearBtn.onclick=()=>{
    if(confirm("Clear all leaderboard data?")){
      localStorage.removeItem("edulink_leaderboard");
      loadLeaderboard();
    }
  };

  // Auto-update when quiz saves new score
  let prevData="";
  setInterval(()=>{
    const now=localStorage.getItem("edulink_leaderboard");
    if(now!==prevData){
      prevData=now;
      loadLeaderboard();
    }
  },1500);

  loadLeaderboard();
  </script>
</body>
</html>
